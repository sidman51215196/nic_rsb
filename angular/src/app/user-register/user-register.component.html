
<div class="full-screen">
  <div class="card-container">
  <!-- Personal Details Card -->
  <mat-card *ngIf="currentCard === 1">
    <mat-card-title>Personal Details : </mat-card-title>
    <div class="space"></div>
    <form [formGroup]="personalDetailsForm" (ngSubmit)="submitCard(1)">
      <div class="name">
        <mat-form-field [style.width.px]="250">
          <mat-label>First Name</mat-label>
          <input matInput formControlName="firstName" required>
          <mat-error *ngIf="personalDetailsForm.get('firstName')?.hasError('required')">
            First Name is required
          </mat-error>
        </mat-form-field>
        <mat-form-field [style.width.px]="250">
          <mat-label>Middle Name</mat-label>
          <input matInput formControlName="middleName">
        </mat-form-field>
        <mat-form-field [style.width.px]="250">
          <mat-label>Last Name</mat-label>
          <input matInput formControlName="lastName" required>
          <mat-error *ngIf="personalDetailsForm.get('lastName')?.hasError('required')">
            Last Name is required
          </mat-error>
        </mat-form-field>
      </div>
      <mat-form-field>
        <mat-label>Unique ID</mat-label>
        <input matInput formControlName="uniqueId">
        <mat-error *ngIf="personalDetailsForm.get('uniqueId')?.hasError('required')">
          Unique ID is required
        </mat-error>
        <mat-error *ngIf="personalDetailsForm.get('uniqueId')?.hasError('pattern')">
          Unique ID Invalid
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Contact Number</mat-label>
        <input matInput formControlName="contactNumber">
        <mat-error *ngIf="personalDetailsForm.get('contactNumber')?.hasError('required')">
          Contact Number is required
        </mat-error>
        <mat-error *ngIf="personalDetailsForm.get('contactNumber')?.hasError('pattern')">
          Invalid Contact Number
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Aadhar Number</mat-label>
        <input matInput formControlName="aadharNumber" (input)="formatAadharNumber()">
        <mat-error *ngIf="personalDetailsForm.get('aadharNumber')?.hasError('required')">
          Aadhar Number is required
        </mat-error>
        <mat-error *ngIf="personalDetailsForm.get('aadharNumber')?.hasError('pattern')">
          Invalid Aadhar Number
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Email</mat-label>
        <input matInput formControlName="email">
        <mat-error *ngIf="personalDetailsForm.get('email')?.hasError('email')">
          Must be a valid email
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>district</mat-label>
      <mat-select formControlName="district" required>
        <mat-option *ngFor="let district of districtChoices" [value]="district.value">{{ district.label }}</mat-option>
      </mat-select>
      <mat-error *ngIf="personalDetailsForm.get('district')?.invalid && personalDetailsForm.get('district')?.touched">
        district is required
      </mat-error>
    </mat-form-field>
      <div formGroupName="address" >
        <mat-form-field class="address">
          <mat-label>Address</mat-label>
          <input matInput formControlName="address">
        </mat-form-field>
      </div>
      <mat-form-field>
        <mat-label>Date of Birth</mat-label>
        <input matInput formControlName="dateOfBirth" placeholder="YYYY-MM-DD">
        <mat-error *ngIf="personalDetailsForm.get('dateOfBirth')?.hasError('required')">
          Date of Birth is required
        </mat-error>
        <mat-error *ngIf="personalDetailsForm.get('dateOfBirth')?.hasError('pattern')">
          Must be in YYYY-MM-DD format
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Alive/Expired</mat-label>
        <mat-select formControlName="aliveStatus">
          <mat-option value="Alive">Alive</mat-option>
          <mat-option value="Expired">Expired</mat-option>
        </mat-select>
        <mat-error *ngIf="personalDetailsForm.get('aliveStatus')?.hasError('required')">
          Status is required
        </mat-error>
      </mat-form-field>
      <mat-form-field *ngIf="showDateWhenExpired">
        <mat-label>Date When Expired</mat-label>
        <input matInput formControlName="dateWhenExpired">
        <mat-error *ngIf="personalDetailsForm.get('dateWhenExpired')?.hasError('required')">
          Date When Expired is required
        </mat-error>
        <mat-error *ngIf="personalDetailsForm.get('dateWhenExpired')?.hasError('pattern')">
          Must be in DD/MM/YYYY format
        </mat-error>
      </mat-form-field>
      <button mat-button class="blue-button" type="button" (click)="submitCard(1)">Next</button>
    </form>
  </mat-card>
  <!-- Service Details Card -->
  <mat-card *ngIf="currentCard === 2">
    <mat-card-title>Service Details</mat-card-title>
    <div class="space"></div>
    <form [formGroup]="serviceDetailsForm">
      <mat-form-field>
        <mat-label>Commission</mat-label>
        <mat-select formControlName="commission" required>
          <mat-option *ngFor="let commission of commissionOptions" [value]="commission.value">{{ commission.label }}</mat-option>
        </mat-select>
        <mat-error *ngIf="serviceDetailsForm.get('commission')?.invalid && serviceDetailsForm.get('commission')?.touched">
          Commission is required
        </mat-error>
      </mat-form-field>
      
      <mat-form-field>
        <mat-label>Corps</mat-label>
        <mat-select formControlName="corps" required>
          <mat-option *ngFor="let corps of corpsOptions" [value]="corps.value">{{ corps.label }}</mat-option>
        </mat-select>
        <mat-error *ngIf="serviceDetailsForm.get('corps')?.invalid && serviceDetailsForm.get('corps')?.touched">
          Corps is required
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <input matInput formControlName="dateOfEnrollment" placeholder="Date of Enrollment YYYY-MM-DD">
        <mat-error *ngIf="serviceDetailsForm.get('dateOfEnrollment')?.invalid && serviceDetailsForm.get('dateOfEnrollment')?.touched">
          Date of Enrollment must be in YYYY-MM-DD format
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <input matInput formControlName="dateOfRetirement" placeholder="Date of Retirement YYYY-MM-DD">
        <mat-error *ngIf="serviceDetailsForm.get('dateOfRetirement')?.invalid && serviceDetailsForm.get('dateOfRetirement')?.touched">
          Date of Retirement must be in YYYY-MM-DD format
        </mat-error>
      </mat-form-field>
      <button mat-button class="blue-button" type="button" (click)="moveToPreviousCard()">Previous</button>
      <div class="space"></div>
      <button mat-button class="blue-button" type="button" (click)="submitCard(2)">Next</button>
    </form>
  </mat-card>
  <!-- Bank Details Card -->
  <mat-card *ngIf="currentCard === 3">
    <mat-card-title>Bank Details</mat-card-title>
    <div class="space"></div>
    <form [formGroup]="bankDetailsForm" (ngSubmit)="onSubmit()">
      <mat-form-field>
        <mat-label>PAN Number</mat-label>
        <input matInput formControlName="panNumber" maxlength="10" required>
        <mat-error *ngIf="bankDetailsForm.get('panNumber')?.hasError('pattern')">
          Invalid PAN Number format
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Bank Name</mat-label>
        <input matInput formControlName="bankName">
      </mat-form-field>
      <mat-form-field>
        <mat-label>IFSC Code</mat-label>
        <input matInput formControlName="ifscCode" required>
        <mat-error *ngIf="bankDetailsForm.get('ifscCode')?.hasError('pattern')">
          IFSC Code must contain only alphanumeric characters
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Account Type</mat-label>
        <mat-select formControlName="accountType" required>
          <mat-option *ngFor="let type of accountTypes" [value]="type">{{ type }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Account Number</mat-label>
        <input matInput formControlName="accountNumber" required>
        <mat-error *ngIf="bankDetailsForm.get('accountNumber')?.hasError('pattern')">
          Account Number must contain only numbers
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>PPO Number</mat-label>
        <input matInput formControlName="ppoNumber" required>
        <mat-error *ngIf="bankDetailsForm.get('ppoNumber')?.hasError('pattern')">
          PPO Number must contain exactly 12 digits
        </mat-error>
      </mat-form-field>
      <button mat-button class="blue-button" type="button" (click)="moveToPreviousCard()">Previous</button>
      <div class="space"></div>
      <button mat-button class="blue-button" type="submit">Submit</button>
    </form>
  </mat-card>
</div>
</div>